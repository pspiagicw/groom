name = "groom-make"

[variables]
version = "0.1.0"
binary = "groom-make"
build-dir = "build"
main-file = "cmd/$name/main.go"
ldflags = "-X main.VERSION='$version'"

[task.build]
description = "Build the project"
command = 'go build -ldflags "$ldflags" -o $name ${main-file}'
environment = [ "CGO_ENABLED=0" ]
depends = [
    "format"
]

[task.format]
description = "Format the project"
command = "go fmt ./..."

# [task.compile-amd64]
# description = "Compile binary for Linux platform."
# command = "go build  -ldflags \"$ldflags\" -o ${build-dir}/$binary-$version-linux-amd64 ${main-file}"
# environment = [
#     "CGO_ENABLED=0",
#     "GOOS=linux",
#     "GOARCH=amd64",
# ]

[task.clean]
description = "Clean the repository"
command = "rm -rf ${build-dir}"

